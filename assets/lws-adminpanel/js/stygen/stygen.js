(function(a){a.widget("lws.lws_css_editor",{_create:function(){this.cssValues=lwsBase64.toObj(this.element.data("cssvalues"));console.log(this.cssValues);this.menuTable={};this.cssObject={};this.miscValues={};this._createCssObject();this._createMaster();this._applyCss();this._addBackgroundSwitcher();var b=this.element.find(".lwss_centraldiv");this.popupShadow=a("<div>").addClass("lwss-popup-shadow").appendTo(b);this.element.on("mouseover",".lwss_menu_selector",this._bind(this._overSelector,this));this.element.on("mouseover",".lwss_selector",this._bind(this._overSelector,this));this.element.on("mouseout",".lwss_menu_selector",this._bind(this._outSelector,this));this.element.on("mouseout",".lwss_selector",this._bind(this._outSelector,this));this.element.on("click",".lwss_menu_selector",this._bind(this._clickSelector,this));this.element.on("click",".lwss_selector",this._bind(this._clickSelector,this));this.element.on("click",".lwss-main-conteneur",this._bind(this._clickEditor,this));this.element.on("click",".lwss-sidemenu",this._bind(this._clickEditor,this));this.myStylingPanel=a("<div>").addClass("lwss_styling_panel").prependTo(b);this.myStylingPanel.lws_styling_panel({stygen:this});this.myStylingPanel.lws_styling_panel("makeCssChain")},_bind:function(b,c){return function(){return b.apply(c,arguments)}},_createMaster:function(){var b=this;this.masterObject={};var c=this.element.find(".lwss_sidemenu");this.element.find(".lwss_selectable").each(function(){var d=a(this);var e="."+d.attr("class").split(" ").join(".");var g=b._createSelector(d,e);var f={Selectable:d,Selector:g,Class:e,Over:"no",Active:"no"};if(b.masterObject[e]==undefined){b.masterObject[e]={};b.masterObject[e].elements=[];b.masterObject[e].cssValues=(b.cssObject[e]!=undefined)?b.cssObject[e]:{idle:{}};b.masterObject[e].menuItem=a("<div>").addClass("lwss_menu_selector").data("theClass",e).html(d.data("type")).appendTo(c)}b.masterObject[e].elements.push(f)})},_overSelector:function(b,c){var e=a(b.currentTarget).data("theClass");var d=this.masterObject[e];d.menuItem.addClass("lwss_over_msel");for(let i=0;i<d.elements.length;i++){d.elements[i].Selector.addClass("lwss_over_sel")}},_outSelector:function(b,c){var e=a(b.currentTarget).data("theClass");var d=this.masterObject[e];d.menuItem.removeClass("lwss_over_msel");for(let i=0;i<d.elements.length;i++){d.elements[i].Selector.removeClass("lwss_over_sel")}},_createSelector:function(b,e){if(b.prop("nodeName")=="INPUT"){if(b.attr("type")=="password"){b.prop("disabled",true)}var c=b.parent();var d=a("<div>",{"class":"lwss_wrapper"}).appendTo(c);b.detach().appendTo(d);theSelector=a("<div>",{"class":"lwss_selector lwss_inp_sel"}).data("theClass",e).appendTo(d);theSelector.outerWidth(b.outerWidth(true)+4).outerHeight(b.outerHeight(true)+4);theSelector.css("top",b.position().top-2).css("left",b.position().left-2)}else{theSelector=a("<div>",{"class":"lwss_selector"}).data("theClass",e).prependTo(b)}return a(theSelector)},_addBackgroundSwitcher:function(){var b=this.element.find(".lwss-main-conteneur");var e=a("<div>").addClass("lws-bg-switcher").appendTo(b);var d=a("<div>").addClass("lws-white-switcher").appendTo(e);d.click(function(){b.css("background","#ffffff")});var c=a("<div>").addClass("lws-black-switcher").appendTo(e);c.click(function(){b.css("background","#000000")})},placeSelectors:function(){this.element.find(".lwss_inp_sel").each(function(){var c=a(this);var b=c.parent().find(".lwss_selectable");c.outerWidth(b.outerWidth(true)+4).outerHeight(b.outerHeight(true)+4);c.css("top",b.position().top-2).css("left",b.position().left-2)})},_clickSelector:function(d){this.element.find(".lwss_selector").removeClass("lwss_sel_sel");this.element.find(".lwss_menu_selector").removeClass("lwss_sel_msel");var f=a(d.currentTarget).data("theClass");var e=this.masterObject[f];e.menuItem.addClass("lwss_sel_msel");for(let i=0;i<e.elements.length;i++){e.elements[i].Selector.addClass("lwss_sel_sel")}var c=this.masterObject[f].elements[0].Selectable;var b=(c.data("id")!="")?c.data("id"):"";this.element.find(".lwss_info").hide();this.myStylingPanel.lws_styling_panel("openStylingPanel",f,b);this.myStylingPanel.show()},_clickEditor:function(c){var b=a(c.target);if(!b.hasClass("lwss_selector")&&!b.hasClass("lwss_menu_selector")){this.element.find(".lwss_selector").removeClass("lwss_sel_sel");this.element.find(".lwss_menu_selector").removeClass("lwss_sel_msel");this.myStylingPanel.lws_styling_panel("setEvent","idle");this.element.find(".lwss_styling_panel").hide();this.element.find(".lwss_info").show()}},_createCssObject:function(){var b=this;a.each(this.cssValues,function(d,f){var c=(f.Selector.split(":"))[0];var g=((f.Selector.split(",")[0].split(":"))[1]!=undefined)?(f.Selector.split(",")[0].split(":"))[1]:"idle";var e=(b.cssObject[c]!=undefined)?b.cssObject[c]:{};e[g]=f.Defaults;if(f.Values!=null&&f.Values!=undefined&&!Array.isArray(f.Values)){e[g]=f.Values}b.cssObject[c]=e})},_applyCss:function(){lwssCanvas=this.element;a.each(this.cssValues,function(b,c){lwssCanvas.find(c.Selector).css(c.Defaults);lwssCanvas.find(c.Selector).css(c.Values)})}})})(jQuery);jQuery(function(a){a(".lwss_editor").lws_css_editor();a(".lwss_editor").click(function(b){if(a(b.target).closest(".lwss-color-selector-relative").length==0&&a(b.target).closest(".lwss-fontselect-popup").length==0){a(".lwss-popup-shadow").hide()}});a(".lws-stygen-reset").click(function(){a(".lws-stygen-reset-form").remove();var b=a("<form>").attr("method","post").addClass("lws-stygen-reset-form").css("display","none").appendTo(a("body"));a("<input>").attr("type","hidden").attr("name","lws-stygen-reset-"+a(this).data("id")).addClass("lws-stygen-reset-id").val("true").appendTo(b);a("<input>").attr("type","submit").appendTo(b).trigger("click")})});